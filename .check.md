# Checklist Geral do Frontend (React/Next.js)

## Obrigatórios (Baseado no README.md e Progresso Atual)
1. **Campo de Upload de Arquivo**
   - [x] Campo `<input type="file">` para selecionar CSV.
     - **O que foi feito**: Implementado em `UploadForm.tsx` com `accept=".csv"`.
   - [x] Botão "Upload" para iniciar o processo.
     - **O que foi feito**: Adicionado em `UploadForm.tsx` com `handleUpload`.

2. **Indicador de Progresso**
   - [x] Exibir um loading durante upload e processamento.
   - [x] Feedback básico de progresso (ex.: "Enviando...").
   - **O que foi feito**: Adicionado em `UploadForm.tsx` com fases "Enviando", "Processando", "Concluído" e contagem de progresso.

3. **Exibição dos Resultados**
   - [x] Mensagem de sucesso após upload.
     - **O que foi feito**: Exibida via `setMessage` em `UploadForm.tsx` ("Upload concluído com sucesso!").
   - [x] Tabela com colunas `name`, `price`, `expiration`, e `exchangeRates`.
     - **O que foi feito**: Criada em `ProductsTable.tsx` com todas as colunas requeridas.
   - [x] Navegação básica na tabela (ex.: rolagem ou paginagem inicial).
     - **O que foi feito**: Paginagem com "Anterior" e "Próximo" em `ProductsTable.tsx`.

4. **Gerenciamento de Estado Centralizado**
   - [x] Migrar estado para Redux ou Context API.
     - **O que foi feito**: Usado Zustand em `store.ts` para gerenciar `jobIds`, `products`, `uploadStatuses`, etc.
     - **Nota**: Zustand é uma alternativa leve a Redux/Context, considerada concluída.

5. **Escalabilidade da Tabela com Paginação**
   - [x] Suporte a `page` e `limit` no `GET /products`.
     - **O que foi feito**: Implementado em `api.ts` (`getProducts`) e usado em `ProductsTable.tsx`.
   - [x] Controles de navegação (ex.: "Anterior", "Próximo").
     - **O que foi feito**: Adicionados em `ProductsTable.tsx` com `fetchProducts`.

6. **Feedback de Progresso**
   - [ ] Simulação de progresso baseada no tamanho do arquivo.
     - **O que falta**: Atualmente, o progresso é apenas um loading genérico; falta estimativa baseada no tamanho ou etapas.
     - **Como implementar**: Calcular tamanho do arquivo no `UploadForm` e simular progresso localmente, ou usar WebSocket (opcional) para atualizações reais.

7. **UI/UX Melhorada**
   - [x] Estilização básica (ex.: CSS ou Material-UI).
     - **O que foi feito**: Usado Tailwind com Shadcn-UI (`button.tsx`, `table.tsx`) para estilização consistente.
   - [x] Exibir erros do backend (ex.: "Arquivo inválido").
     - **O que foi feito**: Mostrados em `ProductsTable.tsx` como lista de `allErrors`.

8. **Tipagem Forte**
   - [x] Interface `Product` em `types.ts`.
     - **O que foi feito**: Definidas `Product`, `CsvError`, `UploadStatus`, etc., em `types/index.ts`.

- **Status**: 7/8 concluídos (87.5%). Pendente apenas "Feedback de Progresso" detalhado.

## Melhorias Adicionais (Prioridades para Robustez e Simplicidade)

### Código
- [ ] Componentes funcionais com hooks personalizados (ex.: `useUpload`).
  - **Por que fazer?**: Encapsular lógica de upload e status em hooks reutilizáveis.
  - **Como implementar**: Criar `useUpload.ts` com `useState` e chamadas a `api.ts`.
- [x] Separar lógica de fetch em `api.ts`.
  - **O que foi feito**: Já implementado com `uploadCsv`, `getUploadStatus`, `getProducts`.
- [ ] Usar `react-query` para cache.
  - **Por que fazer?**: Melhorar desempenho com cache automático e refetching.
  - **Como implementar**: Substituir Zustand por `react-query` em `ProductsTable` e `UploadForm`.

### Escalabilidade
- [ ] Virtualização com `react-virtualized` para 200k+ linhas.
  - **Por que fazer?**: Evitar lentidão na renderização de tabelas grandes.
  - **Como implementar**: Integrar `react-virtualized` na `ProductsTable` para renderizar apenas linhas visíveis.
- [ ] Lazy loading de dados.
  - **Por que fazer?**: Carregar produtos sob demanda ao rolar ou navegar.
  - **Como implementar**: Usar `IntersectionObserver` ou `react-query` com infinite scroll.
- [ ] Debounce no filtro por nome.
  - **Por que fazer?**: Reduzir chamadas desnecessárias ao backend em filtros.
  - **Como implementar**: Adicionar `lodash.debounce` em um futuro campo de busca.

### Testes
- [ ] Testes unitários com React Testing Library.
  - **Por que fazer?**: Garantir robustez dos componentes.
  - **Como implementar**: Testar `UploadForm` e `ProductsTable` com RTL.
- [ ] Testes de integração (fluxo completo).
  - **Por que fazer?**: Validar o fluxo de upload até exibição.
  - **Como implementar**: Simular upload e resposta do backend com RTL.
- [ ] Mock de API com MSW.
  - **Por que fazer?**: Testes offline robustos.
  - **Como implementar**: Configurar MSW para mockar `api.ts`.

### Segurança
- [ ] Validação de arquivo no frontend.
  - **Por que fazer?**: Evitar envio de arquivos inválidos antes do backend.
  - **Como implementar**: Checar `file.type` e tamanho em `handleFileChange`.
- [ ] Proteção contra XSS.
  - **Por que fazer?**: Segurança ao exibir dados do backend.
  - **Como implementar**: Usar `sanitize-html` em `ProductsTable` para `name`.
- [ ] Timeout para uploads longos.
  - **Por que fazer?**: Evitar travamentos em uploads demorados.
  - **Como implementar**: Configurar `axios` com `timeout` em `api.ts`.

### UI/UX
- [ ] Tema claro/escuro com Material-UI.
  - **Por que fazer?**: Melhor acessibilidade e estética.
  - **Como implementar**: Usar `next-themes` com Tailwind para alternar temas.
- [ ] Exportação para CSV/PDF.
  - **Por que fazer?**: Funcionalidade útil para usuários.
  - **Como implementar**: Adicionar botão em `ProductsTable` com `jsPDF` ou `csv-stringify`.
- [ ] Indicador específico por ação.
  - **Por que fazer?**: Feedback mais granular (ex.: "Salvando no banco...").
  - **Como implementar**: Atualizar `UploadForm` com estados adicionais.

### Extras
- [ ] Gráfico de preços (Chart.js).
  - **Por que fazer?**: Visualização de dados impressionante.
  - **Como implementar**: Adicionar componente com `Chart.js` em `ProductsTable`.
- [ ] Histórico de uploads.
  - **Por que fazer?**: Acompanhar uploads anteriores.
  - **Como implementar**: Armazenar `jobIds` em `localStorage` e exibir em nova página.
- [ ] Internacionalização (i18n).
  - **Por que fazer?**: Suporte a múltiplos idiomas.
  - **Como implementar**: Usar `next-intl` para traduzir textos.

- **Status**: 1/17 concluído (5.9%). Apenas "Separar lógica de fetch" foi feito.

## Resumo
- **Obrigatórios**: 7/8 concluídos (87.5%).
- **Melhorias Adicionais**: 1/17 concluído (5.9%).
- **Prioridades Incrementais**:
  1. Concluir "Feedback de Progresso" (obrigatório restante).
  2. Adicionar testes unitários e validação de arquivo (robustez inicial).
  3. Implementar hooks personalizados e proteção XSS (simplicidade e segurança).
  4. Escalar com virtualização e tema claro/escuro (impressionar recrutadores).

## Próximos Passos
- **Incremental**: 
  - Finalizar "Feedback de Progresso" com um indicador simples.
  - Adicionar testes unitários básicos com RTL.
  - Implementar validação de arquivo no `UploadForm`.
- **Robustez**: Após os passos iniciais, focar em `react-query`, virtualização e exportação para CSV.
- **Simplicidade**: Manter Zustand por enquanto, evitando complexidade de outras libs.